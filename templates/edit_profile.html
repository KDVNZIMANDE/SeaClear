{% extends "base.html" %} {% block title %}Edit Profile{% endblock %} {% block
content %}
<div class="container mt-4">
  <h2>Edit Profile</h2>

  <form
    action="{{ url_for('edit_profile') }}"
    method="POST"
    enctype="multipart/form-data"
  >
    <!-- Display Name -->
    <div class="mb-3">
      <label for="display_name" class="form-label">Display Name</label>
      <input
        type="text"
        class="form-control"
        id="display_name"
        name="display_name"
        value="{{ current_user.username }}"
        required
      />
    </div>

    <!-- Profile Photo Upload -->
    <div class="mb-3">
      <label for="profile_photo" class="form-label">Profile Photo</label>
      <input
        type="file"
        class="form-control"
        id="profile_photo"
        name="profile_photo"
        accept="image/*"
      />
    </div>

    {% if current_user.profile_photo %}
    <div class="mb-3">
      <img
        src="{{ url_for('static', filename='profile_photos/' + current_user.profile_photo) }}"
        alt="Current Profile Photo"
        class="img-thumbnail"
        style="max-width: 200px"
      />
    </div>
    {% endif %}

    <button type="submit" class="btn btn-primary">Save Changes</button>
  </form>

  <hr />

  <h3 class="mt-4">Favorite Beaches</h3>
  {% if favorite_beaches %}
  <ul class="list-group">
    {% for beach in favorite_beaches %}
    <li
      class="list-group-item d-flex justify-content-between align-items-center"
    >
      {{ beach.name }}
      <form
        action="{{ url_for('favorites', beach_id=beach.id, view = 'edit_profile') }}"
        style="display: inline"
      >
        <button type="submit" class="btn btn-sm btn-danger">Unfavorite</button>
      </form>
    </li>
    {% endfor %}
  </ul>
  {% else %}
  <p>You haven't favorited any beaches yet.</p>
  {% endif %}
</div>
{% endblock %}
